package com.github.machosmurf.exploitdbwatchdog;

import javax.persistence.Entity;
import javax.persistence.Id;
import java.util.List;

public class DatabaseStats {

    private static List<Platform> platforms;
    private static List<Type> types;
    private static List<Language> languages;
    private static List<Port> ports;

    private ExploitRepository exploitRepository;

    public DatabaseStats(ExploitRepository exploitRepository){
        this.exploitRepository = exploitRepository;
        reloadStats();
    }

    private void reloadStats() {
        types = exploitRepository.findTypeCount();
        platforms = exploitRepository.findPlatformCount();
        ports = exploitRepository.findPortCount();
        //languages = exploitRepository.findLanguageCount();
    }

    public static List<Port> getPorts() {
        return ports;
    }

    public static List<Language> getLanguages() {
        return languages;
    }

    public static List<Platform> getPlatforms() {
        return platforms;
    }

    public static List<Type> getTypes() {
        return types;
    }

    public class Platform{
        private int count;
        private String platform;

        public Platform(String platform, int count){
            this.count = count;
            this.platform = platform;
        }

        public int getCount() {
            return count;
        }

        public String getPlatform() {
            return platform;
        }
    }

    public class Type{
        private int count;
        private String type;

        public Type(String type, int count){
            this.count = count;
            this.type = type;
        }

        public int getCount() {
            return count;
        }

        public String getType() {
            return type;
        }
    }

    public class Port{
        private int count;
        private int port;

        public Port(int port, int count){
            this.count = count;
            this.port = port;
        }

        public int getCount() {
            return count;
        }

        public int getPort() {
            return port;
        }
    }
}
